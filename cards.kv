#:kivy 1.8

<Card>:
    orientation: 'vertical'
    size_hint: None,None
    name: 'NULL'
    card_text: 'NULL'
    selected: False
    type: 'NULL'
    face_up: False


<MapCard>:
    reward_text_a: ''
    reward_text_b: ''
    face_up: True
    name: 'MAP CARD'
    type: 'MAP'

<CityMap>:
    name: 'CITY'

<EventCard>:
    name: 'EVENT'
    type: 'EVENT'
    canvas.before:
        Color:
            rgba: (0.2,0.2,0.2,1) if root.face_up==True else (0.5,0.5,0.5,1)
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: (0,0,0,1)
        Line:
            width: 1
            rectangle: root.x, root.y, root.width, root.height
    Label:
        size_hint: 1, 0.3
        text_size: root.width, None
#        text_size: self.size
#        texture_size: self.size
        text: root.name if root.face_up else ''
        font_size: self.size[1]//3
        halign: 'center'
        valign: 'center'
#        on_size: self.texture_size = self.size
        color: 1,1,0.8,1
    Label:
        size_hint: 1, 0.7
#        text_size: self.size
        text_size: root.width, None
        halign: 'center'
        valign: 'center'
        font_size: self.size[1]//8
        text: root.card_text if root.face_up else ''
        color: 1,1,1,1

<SpawnEvent>:
    name: 'SPAWN'
    card_text: 'Spawn a guard at the nearest waypoint to the player'

<PatrolEvent>:
    name: 'PATROL'
    card_text: "All guards on the player's map card move to the next waypoint"

<AlertEvent>:
    name: 'ALERT'
    card_text: "All guards on the player's map card become alert"

<MoveEvent>:
    name: 'MOVE'
    card_text: "The nearest guard moves to a waypoint closer to the player"


<PlayerCard>:
    name: 'PLAYER CARD'
    type: 'PLAYER'
    card_text: ''
    attack_value: 0
    exhausts: False
    discards: True
    stack_value: 1
    canvas.before:
        Color:
            rgba: (0.2,0.2,0.2,1) if root.face_up==True else (0.5,0.5,0.5,1)
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: (0,0,0,1) if self.selected==False else (0.7,0.7,0.1,1)
        Line:
            width: 1
            rectangle: root.x, root.y, root.width, root.height
    Label:
        size_hint: 1, 0.3
        text_size: root.width, None
#        text_size: self.size
#        texture_size: self.size
        text: root.name if root.face_up else ''
        font_size: self.size[1]//3
        halign: 'center'
        valign: 'center'
#        on_size: self.texture_size = self.size
        color: 1,1,0.8,1
    Label:
        size_hint: 1, 0.7
#        text_size: self.size
        text_size: root.width, None
        halign: 'center'
        valign: 'center'
        font_size: self.size[1]//8
        text: root.card_text if root.face_up else ''
        color: 1,1,1,1

<TraitCard>:
    name: 'PLAYER CARD'
    type: 'PLAYER'
    card_text: ''
    attack_value: 0
    tapped: False
    exhausted: False
    discards: True
    stack_value: 1
    canvas.before:
        Color:
            rgba: (0.2,0.2,0.2,1) if root.face_up==True else (0.5,0.5,0.5,1)
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: (0,0,0,1)
        Line:
            width: 1
            rectangle: root.x, root.y, root.width, root.height
    Label:
        size_hint: 1, 0.3
        text_size: root.width, None
#        text_size: self.size
#        texture_size: self.size
        text: root.name if root.face_up else ''
        font_size: self.size[1]//3
        halign: 'center'
        valign: 'center'
#        on_size: self.texture_size = self.size
        color: 1,1,0.8,1
    Label:
        size_hint: 1, 0.7
#        text_size: self.size
        text_size: root.width, None
        halign: 'center'
        valign: 'center'
        font_size: self.size[1]//8
        text: root.card_text if root.face_up else ''
        color: 1,1,1,1

<MoveTrait>:
    name: 'MOVER'
    card_text: 'Hand cards gain Move 1+'
    type: 'TRAIT'

<FightTrait>:
    name: 'FIGHTER'
    card_text: 'Hand cards gain Attack 1+'
    type: 'TRAIT'

<SneakTrait>:
    name: 'SLINKER'
    card_text: 'Hand cards gain Stealth 0.5+ and Knockout 1'
    type: 'TRAIT'

<ClimbTrait>:
    name: 'CLIMBER'
    card_text: 'Hand cards gain Climb 1'
    type: 'TRAIT'

<ArcherTrait>:
    name: 'ARCHER'
    card_text: 'Arrows cards in hand can be fired'
    type: 'TRAIT'

<LootTrait>:
    name: 'LOOTER'
    card_text: 'Hand cards gain Lockpick 1+'
    type: 'TRAIT'

<LootCard>:
    name: 'LOOT CARD'
    type: 'LOOT'

<TreasureCard>:
    name: 'TREASURE'
    card_text: 'BUY 1+: Spend 1 crown in the market'

<SkeletonKey>:
    name: 'SKELETON KEY'
    card_text: 'LOCKPICK 4+'


<MarketCard>:
    name: 'LOOT CARD'
    type: 'LOOT'

<GasArrow>:
    name: 'GAS ARROW'
    card_text: 'Arrow Range 3+. KOs all enemies in the space.'

<RopeArrow>:
    name: 'ROPE ARROW'
    card_text: 'Arrow Range 3+. Climb 1.5 on top of a roof or exhaust to traverse from roof to roof.'

<DecoyArrow>:
    name: 'DECOY ARROW'
    card_text: 'Arrow Range 3+. Alert or dozing guards in line of sight move to targeted space'

<SmokeBomb>:
    name: 'SMOKE BOMB'
    card_text: 'Smoke 1. Enemies in your space cannot see you until the event phase.'

<DimmerArrow>:
    name: 'DIMMER ARROW'
    card_text: 'Arrow Range 3+. Temporarily puts out a light in range until the event phase.'

<Lure>:
    name: 'LURE'
    card_text: 'Lure 1. Bring a solitary guard in the player\'s line of sight into your space.'

<Hypnotize>:
    name: 'HYPNOTIZE'
    card_text: 'Move a solitary guard engaged with you to a space up to range 3 away.'

<BasicMove>:
    name: 'BASIC MOVE'
    card_text: 'Move 1.5+'

<BasicAttack>:
    name: 'BASIC ATTACK'
    card_text: 'Attack 1+'

<BasicClimb>:
    name: 'BASIC CLIMB'
    card_text: 'Climb 1'

<BasicSneak>:
    name: 'BASIC SNEAK'
    card_text: 'Sneak 1+'

<BasicKockout>:
    name: 'BASIC KNOCKOUT'
    card_text: 'Knockout 1'

<BasicArrow>:
    name: 'BASIC ARROW'
    card_text: 'Arrow Range 3+'

<BasicLockpick>:
    name: 'BASIC LOCKPICK'
    card_text: 'Lockpick 1+'

<EfficientMove>:
    name: 'MOVE'
    card_text: 'Move 1.5+'

<EfficientAttack>:
    name: 'ATTACK'
    card_text: 'Attack 2+'

<EfficientClimb>:
    name: 'CLIMB'
    card_text: 'Climb 1.5'

<EfficientSneak>:
    name: 'SNEAK'
    card_text: 'Sneak 1+'

<EfficientKockout>:
    name: 'KNOCKOUT'
    card_text: 'Knockout 1'

<EfficientArrow>:
    name: 'ARROW'
    card_text: 'Arrow Range 5+'

<EfficientLockpick>:
    name: 'LOCKPICK'
    card_text: 'Lockpick 2+'
